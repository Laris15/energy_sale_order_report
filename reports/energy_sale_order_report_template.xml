<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="energy_report_saleorder_document">
        <t t-set="doc" t-value="doc.with_context(lang=doc.partner_id.lang)" />
        <div class="page" style="height: 100%;width:90%;" align="center">
            <!--            custom header-->
            <div class="header" t-att-style="report_header_style"
                 style="font-family: Lato, Lucida Grande, Helvetica neue, Helvetica, Verdana, Arial, sans-serif;height: 30%;width:width:90%;">
                <div class="row zero_min_height">
                    <img src="/energy_sale_order_report/static/description/logo.png" alt="Image is not loading"
                         style="height: 100px;
                                width: 100px;"/>
                </div>
                <div class="row" style="font-weight:bold;font-size:16px;">
                    <div class="col-5 mb4">
                        <div t-if="doc.company_id.name">
                            <span t-field="doc.company_id.name"/>
                        </div>
                        <div t-if="doc.company_id.street">
                            <span t-field="doc.company_id.street"/>
                        </div>
                        <div t-if="doc.company_id.street">
                            <span t-field="doc.company_id.zip"/>
                            -
                            <span t-field="doc.company_id.city"/>
                        </div>
                         <div t-if="doc.company_id.phone">Tel:
                            <span class="o_force_ltr" t-field="doc.company_id.phone"/>
                        </div>
                        <div t-if="doc.company_id.email">
                            <span t-field="doc.company_id.email"/>
                        </div>
                    </div>
                </div>
                <br/>
                <br/>
                <div class="row" style="font-weight:bold;font-size:16px;" align="right">
                    <div class="col-5 mb4">
                        <div t-if="doc.partner_id.name">
                            <span t-field="doc.partner_id.name"/>
                        </div>
                        <div t-if="doc.partner_id.street">
                            <span t-field="doc.partner_id.street"/>
                        </div>
                        <div t-if="doc.partner_id.street2">
                            <span t-field="doc.partner_id.street2"/>
                        </div>
                        <div t-if="doc.partner_id.siret">
                            SIRET: <span t-field="doc.partner_id.siret"/>
                        </div>
                    </div>
                </div>
                <div class="row"
                     style="font-size:20px;font-family:Helvetica;height:40px;background-color:green; color:white; padding:5px" align="center">
                    <div>DEVIS</div>
                </div>
                <div class="row" style="font-weight:bold;font-size:14px;width:80%;">
                    <div class="col-5 mb4">
                        <div align="right">
                            <strong>N° : <span t-field="doc.name"/></strong>
                        </div>
                        <div align="right">
                            <strong>Date : <span class="m-0" t-field="doc.date_order"/></strong>
                        </div>
                    </div>
                </div>
                <!--            <br/>-->
                <h6 style="font-weight:bold;font-size:17px;">ISOLATION D'UN RESEAU HYDRAULIQUE D'EAU CHAUDE SANITAIRE ET CHAUFFAGE HORS VOLUME CHAUFFE</h6>
                <p style="font-size:12px;">
                    Dépose et enlèvement de l'ancien calorifuge. Pose d'un calorifuge neuf conforme à la réglementation
                    RT
                    2012 avec
                    un isolant de classe supérieureou égal à 4 selon la norme NF en 12 828+A1 : 2014. Réseau en sous-sol
                    /
                    cave/ parking
                    / parties communes.
                </p>
<!--                <div>Operation: <span t-field="doc.operation_type"/> </div>-->
            </div>
            <br/>
            <table class="table table-sm o_main_table" style="margin-top: 200px;width:90%;">
                <!-- In case we want to repeat the header, remove "display: table-row-group" -->
                <thead style="display: table-row-group; background-color:green;">
                    <tr>
                        <th name="th_address" class="text-left">Address</th>
                        <th name="th_location" class="text-left">Location</th>
                        <th name="th_quantity" class="text-right">Quantity</th>
                        <th name="th_priceunit" class="text-right">Unit Price</th>
                        <th name="th_subtotal" class="text-right">Amount</th>
                    </tr>
                </thead>
                <tbody class="sale_tbody">

                    <t t-set="current_subtotal" t-value="0"/>

                    <t t-foreach="doc.order_line" t-as="line">

                        <tr t-att-class="'bg-200 font-weight-bold o_line_section' if line.display_type == 'line_section' else 'font-italic o_line_note' if line.display_type == 'line_note' else ''">
                            <t t-if="not line.display_type">
                                <td name="td_address"><span t-field="line.address"/></td>
                                <td name="td_localisation"><span t-field="line.localisation"/></td>
                                <td name="td_quantity" class="text-right">
                                    <span t-field="line.product_uom_qty"/>
                                    <span t-field="line.product_uom"/>
                                </td>
                                <td name="td_priceunit" class="text-right">
                                    <span t-field="line.price_unit"/>
                                </td>
                                <td name="td_subtotal" class="text-right o_price_total">
                                    <span t-field="line.price_subtotal"/>
                                </td>
                            </t>
                        </tr>
                    </t>
                </tbody>
            </table>

            <div class="clearfix" name="so_total_summary">
                <div id="total" class="row" name="total">
                    <div t-attf-class="#{'col-6' if report_type != 'html' else 'col-sm-7 col-md-6'} ml-auto">
                        <table class="table table-sm">
                            <tr style="font-weight:bold;">
                                <td align="left" style="padding:3px;width:70%;">TOTAL H.T</td>
                                <td align="right" style="padding:3px;width:30%;" name="td_amount_untaxed">
                                    <span t-field="doc.amount_untaxed"/>
                                </td>
                            </tr>
                            <tr style="font-weight:bold;">
                                <td align="left" style="padding:3px;width:70%;">TVA (20%)</td>
                                <td align="right" style="padding:3px;width:30%;">
                                    <span t-field="doc.amount_tax"/>
                                </td>
                            </tr>
                            <tr style="font-weight:bold;">
                                <td align="left" style="padding:3px;width:70%;">TOTAL T.T.C</td>
                                <td align="right" style="padding:3px;width:30%;" name="td_amount_total">
                                    <span t-field="doc.amount_total"/>
                                </td>
                            </tr>
                            <tr class="border-black o_subtotal" style="">
                                <td name="td_amount_untaxed_label">
                                    <strong>Prime Certificat d'Economie d'Energie</strong>
                                </td>
                                <td name="td_amount_untaxed" class="text-right">
                                    -
                                    <span t-field="doc.amount_total"/>
                                </td>
                            </tr>
                            <tr class="border-black o_subtotal" style="">
                                <td name="td_amount_untaxed_label">
                                    <strong>NET A PAYER</strong>
                                </td>
                                <td name="td_amount_untaxed" class="text-right">
                                    <span>0,00€</span>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>

            <div class="col-5 mb4 text-right" style="padding-left:15px;width:97%;">
                <span>
                    Poste, hors volume chauffé, réseau en sous-sol/cave ou vide sanitaire. Matériel ou installation:
                    Dépose
                    ou enlèvement de l'ancien calorifuge Pose d'un calorifuge neuf de marque ISOVER, Type U PROTECT PIPE
                    SECTION
                    ALU 2 conforme à la réglementation RT2012, avec un isolant de classe supérieure ou égale à 4, selon
                    la
                    norme NF
                    en 12 828 +A1: 2014. Consommable (masque à poussière, combinaison, sac à ordures, polyane pour
                    protection des sols).
                    Fourniture et posse de coquille de laine de rôche revêtue d'aluminium, joints colés par adhésif
                    aluminium.Lépaisseur installée, soit 20,
                    30,40,50,60,70 mm sera déterminée selon le diamètre de la tuyauterie, par la conformité en classe 4.
                    Mise en sacs à gravats et évacuation, finition, rangement,replis du chantier.
                </span>
                <br/>
                <br/>
                <span>
                    Les travaux ou prestations, objet du présent document, donneront lieu à une contribution financière
                    VERIGO, versée par VERTIGO dans le
                    cadre de son rôle incitatif, sous forme de prime, directement ou via son(ses) mandataire(s), sous
                    réserve de l'engagement de fournir exclusivement
                    à VERTIGO, les documents nécessaires à la valorisation des opérations ou titre du dispositif des
                    Certificat d'Economies
                    d'Energie et sous réserve de la validation de l'éligibilité du dossier par VERTIGO puis par
                    l'autorité
                    administrative compétente. Le montant de
                    cette contribution financière, hors champ d'application de la T.V.A, est susceptible de varier en
                    fonction des travaux effectivement réalisés et du
                    volume des CEE attribués à l'opération et est estimé à : MONTANT TTC
                </span>
                <br/>
                <span>
                    Le client accepte que la société ENERGY de FRANCE, mandataire de VERTIGO collecte et traite ces
                    données
                    à caractère personnel pour les besoins du
                    dépot d'un dossier CEE sur le registre EMMY conformément aux dispositions réglementaires en vigueur
                    et
                    qu'il communique ces
                    données à VERTIGO à des fins de contrôle de la conformité des opérations réalisés chez le client.
                    VERTIGO s'engage à respecter la réglementation
                    française et européenne relative à la protection des données à caractère personnel.
                </span>
            </div>
            <br/>
            <table style="width:100%;">
                <tr>
                    <td style="text-decoration:underline;font-weight:bold;">Bon pour accord le :</td>
                    <td style="text-decoration:underline;font-weight:bold;">Nom et Prénom :</td>
                </tr>

                <tr>
                    <td style="text-decoration:underline;font-weight:bold;">Signature et Cachet :</td>
                    <td style="text-decoration:underline;font-weight:bold;">Fonction :</td>
                </tr>
            </table>
            <br/>
        </div>
         <!-- Custom footer -->
        <div class="o_report_footer">
            <div class="o_report_company">
                <span t-field="doc.company_id.name"/>
                <span t-field="doc.company_id.street"/>
            </div>
        </div>

<!--            <div t-attf-class="footer o_standard_footer o_company_#{doc.company_id.id}_layout">-->
<!--            <div class="text-center" style="border-top: 1px solid black;">-->
<!--                <div t-if="doc.company_id.name" align="center">-->
<!--                    <span t-field="doc.company_id.name"/>-->
<!--                    <span t-field="doc.company_id.street"/> - -->
<!--                    <span t-field="doc.company_id.zip"/>-->
<!--                    <span t-field="doc.company_id.city"/>-->
<!--                </div>-->

<!--                <div name="financial_infos">-->
<!--                    <span t-field="doc.company_id.report_footer"/>-->
<!--                </div>-->

<!--                <div t-if="report_type == 'pdf'" class="text-muted">-->
<!--                    Page: <span class="page"/> / <span class="topage"/>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->
    </template>

    <template id="energy_report_saleorder">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="doc">
                <t t-call="energy_sale_order_report.energy_report_saleorder_document" t-lang="doc.partner_id.lang"/>
            </t>
        </t>
    </template>


</odoo>
